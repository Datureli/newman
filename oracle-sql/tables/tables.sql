-- Soldiers
BEGIN
   EXECUTE IMMEDIATE 'DROP TABLE Soldiers CASCADE CONSTRAINTS';
EXCEPTION
   WHEN OTHERS THEN
      NULL;
END;
/

CREATE TABLE Soldiers (
    SoldierID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    Name VARCHAR2(50) NOT NULL,
    Surname VARCHAR2(50) NOT NULL,
    BloodType CHAR(3) NOT NULL,
    Allergies CLOB,
    MedicalHistory CLOB
);

-- BiometricData
BEGIN
   EXECUTE IMMEDIATE 'DROP TABLE BiometricData CASCADE CONSTRAINTS';
EXCEPTION
   WHEN OTHERS THEN
      NULL;
END;
/

CREATE TABLE BiometricData (
    BiometricID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    SoldierID NUMBER NOT NULL,
    Timestamp TIMESTAMP NOT NULL,
    HeartRate NUMBER NOT NULL,
    BloodPressure VARCHAR2(7),
    OxygenLevel NUMBER(5, 2),
    BodyTemperature NUMBER(4, 2),
    FOREIGN KEY (SoldierID) REFERENCES Soldiers(SoldierID) ON DELETE CASCADE
);

-- Incidents
BEGIN
   EXECUTE IMMEDIATE 'DROP TABLE Incidents CASCADE CONSTRAINTS';
EXCEPTION
   WHEN OTHERS THEN
      NULL;
END;
/

CREATE TABLE Incidents (
    IncidentID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    SoldierID NUMBER NOT NULL,
    IncidentType VARCHAR2(50) NOT NULL,
    Location VARCHAR2(255),
    Timestamp TIMESTAMP NOT NULL,
    FOREIGN KEY (SoldierID) REFERENCES Soldiers(SoldierID) ON DELETE CASCADE
);

-- Alerts
BEGIN
   EXECUTE IMMEDIATE 'DROP TABLE Alerts CASCADE CONSTRAINTS';
EXCEPTION
   WHEN OTHERS THEN
      NULL;
END;
/

CREATE TABLE Alerts (
    AlertID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    SoldierID NUMBER NOT NULL,
    AlertType VARCHAR2(50) NOT NULL,
    Timestamp TIMESTAMP NOT NULL,
    FOREIGN KEY (SoldierID) REFERENCES Soldiers(SoldierID) ON DELETE CASCADE
);

-- MedicalEquipmentUsage
BEGIN
   EXECUTE IMMEDIATE 'DROP TABLE MedicalEquipmentUsage CASCADE CONSTRAINTS';
EXCEPTION
   WHEN OTHERS THEN
      NULL;
END;
/

CREATE TABLE MedicalEquipmentUsage (
    UsageID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    SoldierID NUMBER NOT NULL,
    EquipmentType VARCHAR2(50) NOT NULL,
    Timestamp TIMESTAMP NOT NULL,
    FOREIGN KEY (SoldierID) REFERENCES Soldiers(SoldierID) ON DELETE CASCADE
);
